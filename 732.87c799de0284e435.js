"use strict";(self.webpackChunkSITE_WEB_LIFILED=self.webpackChunkSITE_WEB_LIFILED||[]).push([[732],{7732:(C,m,r)=>{r.r(m),r.d(m,{BackOfficeModule:()=>w});var g=r(6895),o=r(433),c=r(4333),u=r(6773),l=r(4599),e=r(8256),h=r(1481),p=r(4004),_=r(529);let f=(()=>{class a{constructor(t){this.http=t}isAuth(){let t=localStorage.getItem("adminIsLogin");return null!=t&&"admin_login"==t}login(){return this.http.get(l.SX).pipe((0,p.U)(t=>t))}logout(){try{return localStorage.removeItem("adminIsLogin"),!0}catch{return!1}}getMessages(){return this.http.get(l.lv+"?_sort=id&_order=desc").pipe((0,p.U)(t=>t))}addToWhishList(t,s){try{return this.http.patch(l.lv+"/"+t,s).subscribe(i=>{}),!0}catch{return!1}}readMessage(t,s){try{return this.http.patch(l.lv+"/"+t,s).subscribe(i=>{}),!0}catch{return!1}}searchMessage(t,s){return this.http.get(l.lv+"?"+t+"="+s+"&_sort=id&_order=desc").pipe((0,p.U)(i=>i))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(_.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function b(a,n){1&a&&(e.TgZ(0,"span",21),e._uU(1,"* Ce champ est requis"),e.qZA())}function Z(a,n){1&a&&(e.TgZ(0,"span",21),e._uU(1,"* Ce champ est requis"),e.qZA())}let v=(()=>{class a{constructor(t,s,i){this.setTitle=t,this.formbuilder=s,this.adminService=i}ngOnInit(){this.setTitle.setTitle("Login - Admin LIFILED"),this.loginFormData=this.formbuilder.group({email:["",o.kI.required],password:["",o.kI.required]})}login(){this.adminService.login().subscribe(t=>{t.find(i=>(console.log("test 0 passed"),console.log(i),i.email===this.loginFormData.value.email&&i.password===this.loginFormData.value.password?(console.log("test 1 passed"),localStorage.setItem("adminIsLogin","admin_login"),this.loginFormData.reset(),window.location.href=l._O+"lifiled-admin",console.log("true"),!0):(console.log("test 1 failed"),console.log("false"),!1)))})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(h.Dx),e.Y36(o.qu),e.Y36(f))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-auth"]],decls:28,vars:3,consts:[[1,"container","bg-secondary","rounded"],[1,"align-items-center"],[1,"intro-form","rounded","w-75","mx-auto","mt-5","pb-5"],[1,"entete-form","mx-auto","py-5"],[1,"title","fs-2","text-center","bg-primary","rounded","text-white"],[1,"ti-power-off","m-3"],[1,"form","w-75","mx-auto","mb-5"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","email",1,"form-label","text-white","my-2"],[1,"input-group"],[1,"input-group-text","bg-transparent","text-white","border-end-0","p-2"],[1,"ti-email","fs-3"],["formControlName","email","type","email","id","email","placeholder","email de l'Administrateur",1,"form-control","bg-transparent","text-white","border-start-0"],["class","text-warning ",4,"ngIf"],["for","password",1,"form-label","text-white","my-2"],["id","basic-addon3 ",1,"input-group-text","bg-transparent","text-white","border-end-0","p-2"],[1,"ti-lock","fs-3"],["formControlName","password","type","password ","id","password","placeholder","Mot de passe ",1,"form-control","bg-transparent","text-white","border-start-0"],[1,"d-flex","justify-content-center","mb-5"],[1,"btn","btn-success","text-center","w-50","p-3","rounded-pill"],[1,"text-warning"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e._uU(5,"Connexion Admin "),e._UZ(6,"i",5),e.qZA()(),e.TgZ(7,"div",6)(8,"form",7),e.NdJ("ngSubmit",function(){return s.login()}),e.TgZ(9,"div",8)(10,"label",9),e._uU(11," Nom d'utilisateur"),e.qZA(),e.TgZ(12,"div",10)(13,"span",11),e._UZ(14,"i",12),e.qZA(),e._UZ(15,"input",13),e.qZA(),e.YNc(16,b,2,0,"span",14),e.qZA(),e.TgZ(17,"div",8)(18,"label",15),e._uU(19,"Mot de Passe"),e.qZA(),e.TgZ(20,"div",10)(21,"span",16),e._UZ(22,"i",17),e.qZA(),e._UZ(23,"input",18),e.qZA(),e.YNc(24,Z,2,0,"span",14),e.qZA(),e.TgZ(25,"div",19)(26,"button",20),e._uU(27,"VALIDER"),e.qZA()()()()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",s.loginFormData),e.xp6(8),e.Q6J("ngIf",s.loginFormData.controls.email.dirty&&s.loginFormData.hasError("required","email")),e.xp6(8),e.Q6J("ngIf",s.loginFormData.controls.password.dirty&&s.loginFormData.hasError("required","password")))},dependencies:[g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]}),a})();function M(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"Aucun"),e.qZA())}function x(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"i",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,d=e.oxw();return e.KtG(d.addToWhishList(i.id))}),e.qZA()}}function T(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"th",38),e._uU(3),e.qZA(),e.TgZ(4,"td",39),e._uU(5),e.TgZ(6,"a",40),e._uU(7,"client@gmail.com"),e.qZA()(),e.TgZ(8,"td",41),e._uU(9),e.qZA(),e.TgZ(10,"td",35)(11,"div",42)(12,"div",43)(13,"h2",44)(14,"button",45),e.NdJ("click",function(){const d=e.CHM(t).$implicit,q=e.oxw();return e.KtG(q.readMessage(d.id))}),e.TgZ(15,"p",46)(16,"strong"),e._uU(17),e.qZA()()()(),e.TgZ(18,"div",47)(19,"div",48)(20,"strong",49),e._uU(21),e.qZA(),e._uU(22),e.qZA()()()()(),e.TgZ(23,"td",39)(24,"div",50)(25,"a",50),e.YNc(26,x,1,0,"i",51),e.qZA()()(),e.TgZ(27,"td",39)(28,"p"),e._uU(29),e.qZA()()(),e.BQk()}if(2&a){const t=n.$implicit,s=e.oxw();e.xp6(1),e.Tol(s.tableColor(t.status)),e.xp6(2),e.hij("#",t.id,""),e.xp6(2),e.hij("",t.user," - "),e.xp6(1),e.MGl("href","mailto:",t.email,"",e.LSH),e.xp6(3),e.Oqu(t.subject),e.xp6(4),e.MGl("id","panelsStay",t.id,""),e.xp6(1),e.Q2q("data-bs-target","#accordinMessage",t.id,""),e.xp6(3),e.hij(" ",t.message," "),e.xp6(1),e.MGl("id","accordinMessage",t.id,""),e.Q2q("aria-labelledby","panelsStay",t.id,""),e.xp6(3),e.hij("",t.subject," | "),e.xp6(1),e.hij(" ",t.message," "),e.xp6(4),e.Q6J("ngIf",0==t.whish),e.xp6(3),e.hij(" ",t.date,"")}}const A=function(a){return{itemsPerPage:6,currentPage:a}},k=[{path:"",component:(()=>{class a{constructor(t,s,i){this.pageTitle=t,this.adminService=s,this.router=i,this.siteUrl=l._O,this.indexPage=1,this.allMessagesPages="",this.unReadedMessagesPages="active rounded-pill bg-primary ",this.readedMessagesPages="",this.whishMessagesPages=""}ngOnInit(){this.pageTitle.setTitle("Back Office | LIFILED"),this.adminService.isAuth()||this.router.navigateByUrl(this.siteUrl+"lifiled-admin/login"),this.getAllMessages()}getAllMessages(){this.allMessagesPages="active rounded-pill bg-primary",this.unReadedMessagesPages="",this.readedMessagesPages="",this.whishMessagesPages="",this.adminService.getMessages().subscribe(t=>{this.messages=t}),this.titleMessages="Tous les Messsages",this.getUnreadedMessagesNumbers()}getUnreadedMessages(){this.allMessagesPages="",this.unReadedMessagesPages="active rounded-pill bg-primary",this.readedMessagesPages="",this.whishMessagesPages="",this.adminService.searchMessage("status","0").subscribe(t=>{this.messages=t}),this.titleMessages="Nouveaux Messsages",this.getUnreadedMessagesNumbers()}getUnreadedMessagesNumbers(){this.adminService.searchMessage("status","0").subscribe(t=>{this.numberUnreadedMessage=t.length})}getReadedMessages(){this.allMessagesPages="",this.unReadedMessagesPages="",this.readedMessagesPages="active rounded-pill bg-primary",this.whishMessagesPages="",this.adminService.searchMessage("status","1").subscribe(t=>{this.messages=t}),this.titleMessages="Messsages lus",this.getUnreadedMessagesNumbers()}getWhishMessages(){this.allMessagesPages="",this.unReadedMessagesPages="",this.readedMessagesPages="",this.whishMessagesPages="active rounded-pill bg-primary",this.adminService.searchMessage("whish","1").subscribe(t=>{this.messages=t}),this.titleMessages="Messsages Favoris",this.getUnreadedMessagesNumbers()}logOut(){localStorage.removeItem("adminIsLogin"),window.location.href=l._O+"lifiled-admin/login"}readMessage(t){this.adminService.readMessage(t,{status:1})?(console.log("test read message passed"),this.getUnreadedMessagesNumbers()):console.log("test read message failed")}addToWhishList(t){this.adminService.addToWhishList(t,{whish:1})?console.log("test whish message passed"):console.log("test whish message failed")}tableColor(t){switch(t){case 0:return"table-warning";case 1:return"table-info";default:return""}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(h.Dx),e.Y36(f),e.Y36(u.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-back-office"]],decls:82,vars:36,consts:[[1,"d-block","d-sm-none","navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container-fluid"],[1,"navbar-brand",3,"href"],["src","assets/images/logo.png","alt","logo LIFILED",2,"max-width","100px"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","mb-2","mb-md-0"],[1,"nav-link","active",3,"click"],[1,"d-flex","flex-nowrap"],[1,"d-none","d-sm-flex","flex-column","flex-shrink-0","p-3","text-bg-dark",2,"width","250px"],[1,"sticky-top","d-flex","flex-column",2,"height","95vh"],[1,"d-flex","justify-content-center","align-items-center","text-decoration-none",3,"href"],["src","assets/images/logo.png","alt","logo LIFILED",2,"max-width","150px"],[1,"nav","nav-pills","flex-column","mb-auto"],[1,"nav-item","m-2"],[3,"click"],[1,"ti-list"],[1,"ti-tag"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],[1,"ti-star"],[1,"ti-eye"],[2,"color","white"],[1,"dropdown"],["href","#","data-bs-toggle","dropdown","aria-expanded","false",1,"d-flex","align-items-center","text-white","text-decoration-none","dropdown-toggle"],["src","assets/images/profil.png","alt","Admin profil","width","32","height","32",1,"rounded-circle","me-2"],[1,"dropdown-menu","dropdown-menu-dark","text-small","shadow"],[1,"dropdown-item"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"],[1,"mt-5","p-3","d-flex","flex-column","w-100",2,"height","46rem"],[1,"mt-2"],[4,"ngIf"],[1,"mt-3","table","table-hover","rounded"],[1,"table-dark","rounded"],[1,"text-center"],[4,"ngFor","ngForOf"],["previousLabel","Precedent.","nextLabel","Suivant",1,"text-white","text-center",3,"pageChange"],["scope","row",1,"text-center","align-middle"],[1,"text-center","align-middle"],[1,"text-decoration-none",3,"href"],[1,"text-center","text-uppercase","align-middle"],[1,"accordion","bg-transparent","border-0","m-auto",2,"width","280px"],[1,"accordion-item","border-left-0","border-right-0","bg-transparent","border-0"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false","aria-controls","panelsStayOpen-collapseTwo",1,"accordion-button","collapsed","rounded-pill","p-1",3,"click"],[1,"text-truncate","pt-2","ps-2",2,"max-width","150px"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[1,"text-uppercase"],[1,"m-auto"],["class","ti-heart text-secondary",3,"click",4,"ngIf"],[1,"ti-heart","text-secondary",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"button",4),e._UZ(5,"span",5),e.qZA(),e.TgZ(6,"div",6)(7,"ul",7)(8,"li")(9,"a",8),e.NdJ("click",function(){return s.getAllMessages()}),e._uU(10,"Tous Les Messages"),e.qZA()(),e.TgZ(11,"li")(12,"a",8),e.NdJ("click",function(){return s.getUnreadedMessages()}),e._uU(13,"Messages non Lus"),e.qZA()(),e.TgZ(14,"li")(15,"a",8),e.NdJ("click",function(){return s.getWhishMessages()}),e._uU(16,"Messages Favoris"),e.qZA()(),e.TgZ(17,"li")(18,"a",8),e.NdJ("click",function(){return s.getReadedMessages()}),e._uU(19,"Messages Lus"),e.qZA()()()()()(),e.TgZ(20,"main",9)(21,"div",10)(22,"div",11)(23,"a",12),e._UZ(24,"img",13),e.qZA(),e.TgZ(25,"ul",14)(26,"li",15)(27,"a",16),e.NdJ("click",function(){return s.getAllMessages()}),e._UZ(28,"i",17),e._uU(29," Tous les Messages "),e.qZA()(),e.TgZ(30,"li",15)(31,"a",16),e.NdJ("click",function(){return s.getUnreadedMessages()}),e._UZ(32,"i",18),e._uU(33," Messages non lus "),e.TgZ(34,"span",19),e._uU(35),e.qZA()()(),e.TgZ(36,"li",15)(37,"a",16),e.NdJ("click",function(){return s.getWhishMessages()}),e._UZ(38,"i",20),e._uU(39," Messages Favoris "),e.qZA()(),e.TgZ(40,"li",15)(41,"a",16),e.NdJ("click",function(){return s.getReadedMessages()}),e._UZ(42,"i",21),e._uU(43," Messages Lus "),e.qZA()()(),e._UZ(44,"hr",22),e.TgZ(45,"div",23)(46,"a",24),e._UZ(47,"img",25),e.TgZ(48,"strong"),e._uU(49,"Administrateur"),e.qZA()(),e.TgZ(50,"ul",26)(51,"li")(52,"a",27),e._uU(53,"Profil"),e.qZA()(),e.TgZ(54,"li"),e._UZ(55,"hr",28),e.qZA(),e.TgZ(56,"li")(57,"a",29),e.NdJ("click",function(){return s.logOut()}),e._uU(58,"D\xe9connexion"),e.qZA()()()()()(),e.TgZ(59,"div",30)(60,"h3",31),e.YNc(61,M,2,0,"span",32),e._uU(62),e.qZA(),e.TgZ(63,"table",33)(64,"thead",34)(65,"tr")(66,"td",35),e._uU(67,"N\xb0"),e.qZA(),e.TgZ(68,"td",35),e._uU(69,"Utilisateur | Email"),e.qZA(),e.TgZ(70,"td",35),e._uU(71,"Sujet"),e.qZA(),e.TgZ(72,"td",35),e._uU(73,"Messages"),e.qZA(),e.TgZ(74,"td",35),e._uU(75,"Action"),e.qZA(),e.TgZ(76,"td",35),e._uU(77,"Date"),e.qZA()()(),e.TgZ(78,"tbody"),e.YNc(79,T,30,16,"ng-container",36),e.ALo(80,"paginate"),e.qZA()(),e.TgZ(81,"pagination-controls",37),e.NdJ("pageChange",function(d){return s.indexPage=d}),e.qZA()()()),2&t&&(e.xp6(2),e.MGl("href","",s.siteUrl,"accueil",e.LSH),e.xp6(6),e.Gre("nav-item text-center ",s.allMessagesPages,""),e.xp6(3),e.Gre("nav-item text-center ",s.unReadedMessagesPages,""),e.xp6(3),e.Gre("nav-item text-center ",s.whishMessagesPages,""),e.xp6(3),e.Gre("nav-item text-center ",s.readedMessagesPages,""),e.xp6(6),e.MGl("href","",s.siteUrl,"accueil",e.LSH),e.xp6(4),e.Gre("nav-link text-white ",s.allMessagesPages,""),e.xp6(4),e.Gre("nav-link text-white position-relative ",s.unReadedMessagesPages,""),e.xp6(4),e.hij(" ",s.numberUnreadedMessage," "),e.xp6(2),e.Gre("nav-link text-white ",s.whishMessagesPages,""),e.xp6(4),e.Gre("nav-link text-white ",s.readedMessagesPages,""),e.xp6(20),e.Q6J("ngIf",0==(null==s.messages?null:s.messages.length)),e.xp6(1),e.AsE(" ",s.titleMessages," ",null==s.messages?null:s.messages.length," "),e.xp6(17),e.Q6J("ngForOf",e.xi3(80,31,s.messages,e.VKq(34,A,s.indexPage))))},dependencies:[g.sg,g.O5,c.LS,c._s]}),a})()},{path:"login",component:v}];let U=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(k),u.Bz]}),a})(),w=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[g.ez,U,o.u5,o.UX,c.JX]}),a})()}}]);